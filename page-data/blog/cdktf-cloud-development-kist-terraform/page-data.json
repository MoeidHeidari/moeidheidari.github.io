{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/cdktf-cloud-development-kist-terraform","result":{"data":{"markdownRemark":{"excerpt":"Infrastructure as code \nWe all may face common problems while provisioning a cloud infrastructure. Regardless the type of the infrastructure…","html":"<h1 id=\"Infrastructure-as-code\" style=\"position:relative;\"><a href=\"#Infrastructure-as-code\" aria-label=\"Infrastructure as code permalink\" class=\"gatsby-remark-autolink before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Infrastructure as code</h1>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/81d3136e484f2d57c35b809520e68b62/9ecec/Cloud.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.567567567567565%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEAf/EABYBAQEBAAAAAAAAAAAAAAAAAAQCA//aAAwDAQACEAMQAAABjJ0VGCB9v//EABkQAAIDAQAAAAAAAAAAAAAAAAECAAMQEf/aAAgBAQABBQIVpLK0WcGHP//EABYRAQEBAAAAAAAAAAAAAAAAAAACEf/aAAgBAwEBPwGGv//EABcRAQADAAAAAAAAAAAAAAAAAAABAhH/2gAIAQIBAT8BtDH/xAAZEAABBQAAAAAAAAAAAAAAAAABACAxMnH/2gAIAQEABj8ClXBxv//EABgQAQEBAQEAAAAAAAAAAAAAAAERABCR/9oACAEBAAE/IXBTnyU+M07d/9oADAMBAAIAAwAAABCzP//EABgRAQEAAwAAAAAAAAAAAAAAAAEAESFx/9oACAEDAQE/EEjtzc3/xAAWEQADAAAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8QTKMf/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARMVEhQf/aAAgBAQABPxBILbTb4HYSBnQ3xsGixqfCZJqf/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Cloud infrastructure\"\n        title=\"Cloud infrastructure\"\n        src=\"/static/81d3136e484f2d57c35b809520e68b62/1c72d/Cloud.jpg\"\n        srcset=\"/static/81d3136e484f2d57c35b809520e68b62/a80bd/Cloud.jpg 148w,\n/static/81d3136e484f2d57c35b809520e68b62/1c91a/Cloud.jpg 295w,\n/static/81d3136e484f2d57c35b809520e68b62/1c72d/Cloud.jpg 590w,\n/static/81d3136e484f2d57c35b809520e68b62/a8a14/Cloud.jpg 885w,\n/static/81d3136e484f2d57c35b809520e68b62/9ecec/Cloud.jpg 1050w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Cloud infrastructure</figcaption>\n  </figure>\nWe all may face common problems while provisioning a cloud infrastructure. Regardless the type of the infrastructure and the provider of these infrastructures there are common hardships in this way. One of the difficaulties is to automate and monitor the whole infrastructure as we need to do thousands of configurations, plugin and module installations, ... etc. We had to look for a way to somehow codify this process with the programming languages that we are familiar with already. Infrastracture as code also known as IaC is an IT Ops practice that codifies the underlying IT infrastructure as a software. With the infrastructure as code we are able as developers or operators automatically provision, manage, and monitor the underlying resources of a service or software.</p>\n<p>The concept of infrastructure as code is similar to programming <a href=\"https://www.techtarget.com/whatis/definition/script\">scripts</a>, which are used to automate IT processes. However, scripts are primarily used to automate a series of static steps that are repeated numerous times across multiple servers. Infrastructure as code uses higher-level or descriptive language to code more versatile and adaptive provisioning and deployment processes. For example, infrastructure-as-code capabilities included with Ansible, an IT management and configuration tool, can install <a href=\"https://www.techtarget.com/searchoracle/definition/MySQL\">MySQL</a> server, verify that MySQL is running properly, create a user account and password, set up a new database and remove unneeded databases.</p>\n<p>The code-based infrastructure automation process closely resembles software design practices in which development teams carefully control code versions, test iterations and limit deployment until the software is proven and approved for production.</p>\n<p>There are many benefits associated with infrastructure as code, from efficiencies of automation to its flexibility to align with other modern IT practices.</p>\n<ul>\n<li><strong>Speed and efficiency.</strong> Automated provisioning and management are faster and more efficient than manual processes. This stretches not just to provisioned resources and virtualization, but also to databases, networking, user account management and other tied-in services. IaC also can include code that automatically scales (adds or shuts down environments and resources when they are no longer needed).</li>\n<li><strong>Consistency.</strong> Software developers can use code to provision and deploy servers and applications according to business practices and policies, rather than rely on system administrators in a <a href=\"https://www.techtarget.com/searchitoperations/definition/DevOps\">DevOps</a> environment. A developer might create a configuration file to provision and deploy a new application for <a href=\"https://www.techtarget.com/searchsoftwarequality/definition/quality-assurance\">quality assurance</a> or experimental deployment before operations takes over for live deployment in production.</li>\n<li><strong>Alignment with DevOps.</strong> With the infrastructure setup written as code, it can go through the same version control, automated testing and other steps of a <a href=\"https://www.techtarget.com/searchsoftwarequality/definition/continuous-integration\">continuous integration</a> and <a href=\"https://www.techtarget.com/searchitoperations/definition/continuous-delivery-CD\">continuous delivery</a> (CI/CD) pipeline that developers use for application code. An organization may choose to combine infrastructure as code with <a href=\"https://www.techtarget.com/searchitoperations/definition/container-containerization-or-container-based-virtualization\">containers</a>, which abstract the application from the infrastructure at the operating system level. Because the OS and hardware infrastructure are provisioned automatically and the application is <a href=\"https://www.techtarget.com/searchnetworking/definition/encapsulation\">encapsulated</a> atop it, these technologies prove complementary for diverse deployment targets, such as test, staging and production.</li>\n</ul>\n<p>Despite its benefits, infrastructure as code poses potential disadvantages. It requires additional tools, such as a <a href=\"https://www.techtarget.com/searchitoperations/definition/configuration-management-CM\">configuration management</a> and automation/orchestration system, that could introduce learning curves and room for error. Any errors can proliferate quickly through servers, especially where there is extensive automation, so it is essential to monitor version control and perform comprehensive prerelease testing.</p>\n<h1 id=\"Terraform-as-a-well-known-IaC\" style=\"position:relative;\"><a href=\"#Terraform-as-a-well-known-IaC\" aria-label=\"Terraform as a well known IaC permalink\" class=\"gatsby-remark-autolink before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Terraform as a well-known IaC</h1>\n<p>Hashicorp Terraform as an infrastructure as code (IaC) enables us to define both cloud and non-perm resources in a declarative language that you can version, maintain,resuse and share. With terraform we can have a consistent workflow to provision and manage the whole infrastructure thoughout its lifecycle. Terraform can manage following resources:</p>\n<ul>\n<li>low-level components</li>\n<li>storage</li>\n<li>networking</li>\n<li>high-level components like DNS entries and SaaS features</li>\n</ul>\n<p>Terraform creates and manages resources on a cloud infrastructure and other services though their application programming interface(APIs). Providers enable Terraform to work with virtually any platform or service with an accessible API.\n<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2b12ac189472f7722eb9031f4e9eb063/a878e/terraform.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.756756756756754%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDUlEQVQY01VR20rDQBDNd/snvgj6B74JvvRJAgoFXyxqqcVAmqS1TbK72dvMcXfrprhwmNuZM8xsQcRwmsCM9JxheEcgDiAKmXOBAyFys421iBhnxLhwliD2jPVLj81yQL8j2IlnoUlYjEc9i8dBzLl+FnHWz+KFMwQzAu9PAxa3FaYTIE8OWtkAh4frN9xdPePYCVSbA/a7HpMy0NKmYXEj9khbJUEKQbMdsCxXKBevqNY/0AMnQTM5lPdfeLxZQUmNsVfJpmHSQQmDrj1EsBQyXaYgx+hbg+/PFtuPBl0l4A3mlfLj2ec/P96NUNc1mqaBUioRirQ7XRojNx88wRO8p/+5/CGXvuSEHP8C+XvQ47d32jIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Terraform\"\n        title=\"Terraform\"\n        src=\"/static/2b12ac189472f7722eb9031f4e9eb063/fcda8/terraform.png\"\n        srcset=\"/static/2b12ac189472f7722eb9031f4e9eb063/12f09/terraform.png 148w,\n/static/2b12ac189472f7722eb9031f4e9eb063/e4a3f/terraform.png 295w,\n/static/2b12ac189472f7722eb9031f4e9eb063/fcda8/terraform.png 590w,\n/static/2b12ac189472f7722eb9031f4e9eb063/efc66/terraform.png 885w,\n/static/2b12ac189472f7722eb9031f4e9eb063/c83ae/terraform.png 1180w,\n/static/2b12ac189472f7722eb9031f4e9eb063/a878e/terraform.png 2048w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Terraform</figcaption>\n  </figure></p>\n<p>Below you can take a look at a terraform plan example</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># From https://github.com/devopshobbies/terraform-vsphere-ansible/blob/main/part01-terraform-ansible-jenkins/main.tf</span>\n<span class=\"token comment\"># main.tf</span>\nterraform <span class=\"token punctuation\">{</span>\n  required_providers <span class=\"token punctuation\">{</span>\n    vsphere <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token builtin class-name\">source</span>  <span class=\"token operator\">=</span> <span class=\"token string\">\"hashicorp/vsphere\"</span>\n      version <span class=\"token operator\">=</span> <span class=\"token string\">\"2.1.1\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">#===============================================================================</span>\n<span class=\"token comment\"># vSphere Provider</span>\n<span class=\"token comment\">#===============================================================================</span>\n\nprovider <span class=\"token string\">\"vsphere\"</span> <span class=\"token punctuation\">{</span>\n  vsphere_server       <span class=\"token operator\">=</span> var.vsphere_vcenter\n  user                 <span class=\"token operator\">=</span> var.vsphere_user\n  password             <span class=\"token operator\">=</span> var.vsphere_password\n  allow_unverified_ssl <span class=\"token operator\">=</span> var.vsphere_unverified_ssl\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">#===============================================================================</span>\n<span class=\"token comment\"># vSphere Data</span>\n<span class=\"token comment\">#===============================================================================</span>\n\ndata <span class=\"token string\">\"vsphere_datacenter\"</span> <span class=\"token string\">\"dc\"</span> <span class=\"token punctuation\">{</span>\n  name <span class=\"token operator\">=</span> var.vsphere_datacenter\n<span class=\"token punctuation\">}</span>\n\ndata <span class=\"token string\">\"vsphere_compute_cluster\"</span> <span class=\"token string\">\"cluster\"</span> <span class=\"token punctuation\">{</span>\n  name          <span class=\"token operator\">=</span> var.vsphere_cluster\n  datacenter_id <span class=\"token operator\">=</span> data.vsphere_datacenter.dc.id\n<span class=\"token punctuation\">}</span>\n\ndata <span class=\"token string\">\"vsphere_datastore\"</span> <span class=\"token string\">\"datastore\"</span> <span class=\"token punctuation\">{</span>\n  name          <span class=\"token operator\">=</span> var.vm_datastore\n  datacenter_id <span class=\"token operator\">=</span> data.vsphere_datacenter.dc.id\n<span class=\"token punctuation\">}</span>\n\ndata <span class=\"token string\">\"vsphere_network\"</span> <span class=\"token string\">\"network\"</span> <span class=\"token punctuation\">{</span>\n  name          <span class=\"token operator\">=</span> var.vm_network\n  datacenter_id <span class=\"token operator\">=</span> data.vsphere_datacenter.dc.id\n<span class=\"token punctuation\">}</span>\n\ndata <span class=\"token string\">\"vsphere_virtual_machine\"</span> <span class=\"token string\">\"template\"</span> <span class=\"token punctuation\">{</span>\n  name          <span class=\"token operator\">=</span> var.vm_template\n  datacenter_id <span class=\"token operator\">=</span> data.vsphere_datacenter.dc.id\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">#===============================================================================</span>\n<span class=\"token comment\"># vSphere Resources</span>\n<span class=\"token comment\">#===============================================================================</span>\n\nresource <span class=\"token string\">\"vsphere_virtual_machine\"</span> <span class=\"token string\">\"standalone\"</span> <span class=\"token punctuation\">{</span>\n  name             <span class=\"token operator\">=</span> var.vm_name\n  resource_pool_id <span class=\"token operator\">=</span> data.vsphere_compute_cluster.cluster.resource_pool_id\n  datastore_id     <span class=\"token operator\">=</span> data.vsphere_datastore.datastore.id\n\n  num_cpus <span class=\"token operator\">=</span> var.vm_cpu\n  memory   <span class=\"token operator\">=</span> var.vm_ram\n  guest_id <span class=\"token operator\">=</span> data.vsphere_virtual_machine.template.guest_id\n\n  network_interface <span class=\"token punctuation\">{</span>\n    network_id   <span class=\"token operator\">=</span> data.vsphere_network.network.id\n    adapter_type <span class=\"token operator\">=</span> data.vsphere_virtual_machine.template.network_interface_types<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n\n  disk <span class=\"token punctuation\">{</span>\n    label            <span class=\"token operator\">=</span> <span class=\"token string\">\"<span class=\"token variable\">${var.vm_name}</span>.vmdk\"</span>\n    size             <span class=\"token operator\">=</span> data.vsphere_virtual_machine.template.disks.0.size\n    eagerly_scrub    <span class=\"token operator\">=</span> data.vsphere_virtual_machine.template.disks.0.eagerly_scrub\n    thin_provisioned <span class=\"token operator\">=</span> data.vsphere_virtual_machine.template.disks.0.thin_provisioned\n  <span class=\"token punctuation\">}</span>\n\n  clone <span class=\"token punctuation\">{</span>\n    template_uuid <span class=\"token operator\">=</span> data.vsphere_virtual_machine.template.id\n    linked_clone  <span class=\"token operator\">=</span> var.vm_linked_clone\n\n    customize <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">timeout</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"20\"</span>\n\n      linux_options <span class=\"token punctuation\">{</span>\n        host_name <span class=\"token operator\">=</span> var.vm_name\n        domain    <span class=\"token operator\">=</span> var.vm_domain\n      <span class=\"token punctuation\">}</span>\n\n      network_interface <span class=\"token punctuation\">{</span>\n        ipv4_address <span class=\"token operator\">=</span> var.vm_ip\n        ipv4_netmask <span class=\"token operator\">=</span> var.vm_netmask\n      <span class=\"token punctuation\">}</span>\n\n      ipv4_gateway    <span class=\"token operator\">=</span> var.vm_gateway\n      dns_server_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"<span class=\"token variable\">${var.vm_dns}</span>\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># In this section we are going to deal with Ansible in the VM we created before.</span>\nresource <span class=\"token string\">\"local_file\"</span> <span class=\"token string\">\"vm_ip\"</span> <span class=\"token punctuation\">{</span>\n  content  <span class=\"token operator\">=</span> vsphere_virtual_machine.standalone.default_ip_address\n  filename <span class=\"token operator\">=</span> <span class=\"token string\">\"vm_ip.txt\"</span>\n<span class=\"token punctuation\">}</span>\n\nresource <span class=\"token string\">\"null_resource\"</span> <span class=\"token string\">\"nullremote1\"</span> <span class=\"token punctuation\">{</span>\n  depends_on <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>vsphere_virtual_machine.standalone<span class=\"token punctuation\">]</span>\n  connection <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin class-name\">type</span>     <span class=\"token operator\">=</span> <span class=\"token string\">\"ssh\"</span>\n    user     <span class=\"token operator\">=</span> <span class=\"token string\">\"root\"</span>\n    password <span class=\"token operator\">=</span> var.password\n    <span class=\"token function\">host</span>     <span class=\"token operator\">=</span> var.host\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\nprovisioner <span class=\"token string\">\"file\"</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin class-name\">source</span>      <span class=\"token operator\">=</span> <span class=\"token string\">\"vm_ip.txt\"</span>\n  destination <span class=\"token operator\">=</span> <span class=\"token string\">\"hosts.txt\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># Run command on the remote vm</span>\nprovisioner <span class=\"token string\">\"local-exec\"</span> <span class=\"token punctuation\">{</span>\n  inline <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"ansible-playbook jenkins.yml\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\noutput <span class=\"token string\">\"my_ip_address\"</span> <span class=\"token punctuation\">{</span>\n  value <span class=\"token operator\">=</span> vsphere_virtual_machine.standalone.default_ip_address\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># variables.tf</span>\n<span class=\"token comment\">#====================#</span>\n<span class=\"token comment\"># vCenter connection #</span>\n<span class=\"token comment\">#====================#</span>\n\nvariable <span class=\"token string\">\"vsphere_user\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"vSphere user name\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vsphere_password\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"vSphere password\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vsphere_vcenter\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"vCenter server FQDN or IP\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vsphere_unverified_ssl\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"Is the vCenter using a self signed certificate (true/false)\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vsphere_datacenter\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"vSphere datacenter\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vsphere_cluster\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"vSphere cluster\"</span>\n  default     <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">#=========================#</span>\n<span class=\"token comment\"># vSphere virtual machine #</span>\n<span class=\"token comment\">#=========================#</span>\n\nvariable <span class=\"token string\">\"vm_datastore\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"Datastore used for the vSphere virtual machines\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vm_network\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"Network used for the vSphere virtual machines\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vm_template\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"Template used to create the vSphere virtual machines\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vm_linked_clone\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"Use linked clone to create the vSphere virtual machine from the template (true/false). If you would like to use the linked clone feature, your template need to have one and only one snapshot\"</span>\n  default     <span class=\"token operator\">=</span> <span class=\"token string\">\"false\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vm_ip\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"Ip used for the vSpgere virtual machine\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vm_netmask\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"Netmask used for the vSphere virtual machine (example: 24)\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vm_gateway\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"Gateway for the vSphere virtual machine\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vm_dns\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"DNS for the vSphere virtual machine\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vm_domain\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"Domain for the vSphere virtual machine\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vm_cpu\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"Number of vCPU for the vSphere virtual machines\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vm_ram\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"Amount of RAM for the vSphere virtual machines (example: 2048)\"</span>\n<span class=\"token punctuation\">}</span>\n\nvariable <span class=\"token string\">\"vm_name\"</span> <span class=\"token punctuation\">{</span>\n  description <span class=\"token operator\">=</span> <span class=\"token string\">\"The name of the vSphere virtual machines and the hostname of the machine\"</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>As you can see we can provission all the resources from Vm and security groupd to networking and DNS configuration and storage devices that an infrastrucure needs with a decalarative language.</p>\n<p>After applying the terraform plan terraform will generate a <code class=\"language-text\">state file</code> which contains the current situation of the infrastructure always and during the next apply terraform will lock this file to prevent any conflict on the infrastructe due to concurrency inssues.</p>\n<h1 id=\"CDK-Cloud-Development-Kit\" style=\"position:relative;\"><a href=\"#CDK-Cloud-Development-Kit\" aria-label=\"CDK Cloud Development Kit permalink\" class=\"gatsby-remark-autolink before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CDK (Cloud Development Kit)</h1>\n<p>As a foundamental component of modern DevOps practices we introduced Infrastructure as code that helps us to deploy any version of the infrastructure at will, and facilitates the fully automated lifecycle management of all the resources needed to run and monitor the applications. Organizations and companies that are adopted to DevOps practices often deploy houndreds of changes to the production environment daily.</p>\n<p>With CDK you don't need to learn a new language (Even delarative) like terraform language to apply IaC on your infrastructure and instead you can use the programming language that you are familiar with already and use the CDk that is provided by the provider of the cloud system and codify all of your infrastructure resources.</p>\n<h1 id=\"CDKTF\" style=\"position:relative;\"><a href=\"#CDKTF\" aria-label=\"CDKTF permalink\" class=\"gatsby-remark-autolink before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CDKTF</h1>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b0df9a70836d2aca92fa3fc6bcead3fe/2ed34/cdktf.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAADrElEQVQ4y02UbWxTVRjHn3asyzadudYvED/50Q98MfpFwwcTYWOsm91myIJhY5EAJsQYo2hCDIytKwqEGDSwF+JM1JhIgDmwjjEElu4lUeKgdpe0xbX1tvXu3t577mtvt+NzLm2y0/xy/ue5z/mf90KpVHpN0zQjm82STCZDdF3X1tbWyOrqqmbbtibLstvGOMFaw1qRJImWy+UwpRQsy6pVVeJRFJUBYFrmS4ZhjCWSie/QcMww9DFCyOVs9t9RTB7FzqNoNI4544qijKLhJRzke5zIXtsuATNlEKJBsagAhD+97MVAzbnhS1uxbkC8anmFJfmQWqSu2qmiWcwXjS7WyHLxOdR+5HldN/zY9sG6Tt/IJGQzGReUdIyU/0s5y5qmDy7ElPKj+BOZ51eoKK5dxxlclCSZJpMpCWdCcXlnMDaTy+Upzz8WMVbG9rvgEPqykFJ/5h9mruVTxjVVoOct0+55mNKvxFZSV5KJxFSxqH5mWfZhNJlEw59wJhHTtHqRgXy+MBmL/X0Vv11XCXnTXcqtG3OApQ6pgaeFLRfqofaFStuLsKUy3YQ0VGJVGpaXH7leoCklKKQsb//h3hrYBR7ajXt1HAm5nYHuxNqPBtuhgW6txNjvKLID2yGAnT2vbmF7n8k/wUMJ3oFQ2+9wtjtaO9h+6zgyglxAvmYMdcxcGH7nt5ETbTdHmK7GKznfIOfCwbtNQ4HbMBycBRgI/Oo5GbgJJwJTjQOBiIjQKqc6IvTz5hv022OL9IeTf7iaxTbnMLD/i+jjekGoHWe45z581f3Ah6P9eKp9+s/B9ukoMs8YaJueP713ZunLnttLTFfjLAdzl7Ce/SJ43z/UNguhjlnP0z3BzTx06Ejd2837uK6WA1xXa5+/s6WP69zVy+0P7uN2vNK67fXtu7cd6HqP68Tvweb9XNeePn93az8XeKuH290SqHc9Dh7FPQyf9kQiEeZbz05500l6NmlW2OhNlZh3k2Y34xmmJ3+ZArAtC59M8X1RFOc1on1QsksH0+n0AtG0j6iz0S8kF+YNW/5kw3H6pHQiqpsbHxu63p8RhDl8HcdURT0Sj8fvYv9hdtKgaxrIknQe3yfefuWiaRpnioU01VVpXLc2wsn0A2oauYmSbQzm8mkqE2fC0EkoJ4oU/ykmCoXCVZ7nqSAIj9FwS/WNsovcaJqmT8L36GqH+jLZGLvMjYZG6/7ik66m9j++fL7I9LNsvY7jfIh6cX19/ey9e3Pe/wH3KeewAPIt4wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"CDKTF\"\n        title=\"CDKTF\"\n        src=\"/static/b0df9a70836d2aca92fa3fc6bcead3fe/fcda8/cdktf.png\"\n        srcset=\"/static/b0df9a70836d2aca92fa3fc6bcead3fe/12f09/cdktf.png 148w,\n/static/b0df9a70836d2aca92fa3fc6bcead3fe/e4a3f/cdktf.png 295w,\n/static/b0df9a70836d2aca92fa3fc6bcead3fe/fcda8/cdktf.png 590w,\n/static/b0df9a70836d2aca92fa3fc6bcead3fe/efc66/cdktf.png 885w,\n/static/b0df9a70836d2aca92fa3fc6bcead3fe/c83ae/cdktf.png 1180w,\n/static/b0df9a70836d2aca92fa3fc6bcead3fe/2ed34/cdktf.png 1776w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">CDKTF</figcaption>\n  </figure></p>\n<p>Terraform as a well-known IaC system provides CDK (CDKTF)for several programming languages such as  <code class=\"language-text\">typescript</code>,<code class=\"language-text\">golang</code>, <code class=\"language-text\">Python</code>,<code class=\"language-text\">Java</code>,<code class=\"language-text\">C#</code>. We will go through typescript CDKTF in this article.</p>\n<p>To do so at first we need to install CDKTF cli and initialize a typescript project with CDKTF</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --global cdktf-cli@latest</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>to verify the installation you can run the following instruction</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">cdktf --version</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>then you should see the lates version on the cdktf.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> cdktf-project\n<span class=\"token builtin class-name\">cd</span> cdktf-project</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">cdktf-project</code> directory execute <code class=\"language-text\">cdktf init</code> and choose the template that matches your programming language. For this tutorial we will choose <code class=\"language-text\">typescript</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">cdktf init --template<span class=\"token operator\">=</span><span class=\"token string\">\"typescript\"</span>\nProject Name cdktf-project\nProject Description cdktf tutorial project\n\nDetected Terraform Cloud token.\nWe will now <span class=\"token builtin class-name\">set</span> up Terraform Cloud <span class=\"token keyword\">for</span> your project.\nTerraform Cloud Organization Name <span class=\"token operator\">&lt;</span>YOUR_ORG<span class=\"token operator\">></span>\n\nWe are going to create a new Terraform Cloud Workspace <span class=\"token keyword\">for</span> your project.\n\nTerraform Cloud Workspace Name cdktf-project\nSetting up remote state backend and workspace <span class=\"token keyword\">in</span> Terraform Cloud.\nGenerating Terraform Cloud configuration <span class=\"token keyword\">for</span> <span class=\"token string\">'&lt;YOUR_ORG>'</span> organization and <span class=\"token string\">'learn-cdktf'</span> workspace<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>.\n<span class=\"token comment\">## ...</span>\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n\n  Your cdktf typescript project is ready<span class=\"token operator\">!</span>\n\n<span class=\"token comment\">## ...</span>\n\n Use Prebuilt Providers:\n\n  You can <span class=\"token function\">find</span> all prebuilt providers on npm: https://www.npmjs.com/search?q<span class=\"token operator\">=</span>keywords:cdktf\n  You can <span class=\"token function\">install</span> these providers through npm:\n\n  <span class=\"token function\">npm</span> <span class=\"token function\">install</span> @cdktf/provider-aws\n  <span class=\"token function\">npm</span> <span class=\"token function\">install</span> @cdktf/provider-google\n  <span class=\"token function\">npm</span> <span class=\"token function\">install</span> @cdktf/provider-azurerm\n  <span class=\"token function\">npm</span> <span class=\"token function\">install</span> @cdktf/provider-docker\n  <span class=\"token function\">npm</span> <span class=\"token function\">install</span> @cdktf/provider-github\n  <span class=\"token function\">npm</span> <span class=\"token function\">install</span> @cdktf/provider-null\n\n  You can also build any module or provider locally. Learn <span class=\"token function\">more</span> https://cdk.tf/modules-and-providers\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>this code will initialize a CDk for Terraform project using an interactive command.</p>\n<p>Select your terraform cloud organization and choose the name for the terraform cloud workspace.</p>\n<p>try to install AWS provider with the following code</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> @cdktf/provider-aws</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1 id=\"Define-CDK-for-your-terraform-application\" style=\"position:relative;\"><a href=\"#Define-CDK-for-your-terraform-application\" aria-label=\"Define CDK for your terraform application permalink\" class=\"gatsby-remark-autolink before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Define CDK for your terraform application</h1>\n<p>Open the <code class=\"language-text\">main.ts</code> file to see your application code. The template creates a scaffold with no functionality.</p>\n<p>Replace the contents of <code class=\"language-text\">main.ts</code> with the following code for a new TypeScript application, which uses the CDK to provision an AWS EC2 instance in <code class=\"language-text\">us-west-1</code>, and stores its state in Terraform Cloud.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Construct <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"constructs\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> App<span class=\"token punctuation\">,</span> TerraformStack<span class=\"token punctuation\">,</span> TerraformOutput<span class=\"token punctuation\">,</span> RemoteBackend <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"cdktf\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AwsProvider<span class=\"token punctuation\">,</span> ec2 <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@cdktf/provider-aws\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyStack</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">TerraformStack</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>scope<span class=\"token operator\">:</span> Construct<span class=\"token punctuation\">,</span> id<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>scope<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">AwsProvider</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"AWS\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      region<span class=\"token operator\">:</span> <span class=\"token string\">\"us-west-1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ec2</span><span class=\"token punctuation\">.</span><span class=\"token function\">Instance</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"compute\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      ami<span class=\"token operator\">:</span> <span class=\"token string\">\"ami-01456a894f71116f2\"</span><span class=\"token punctuation\">,</span>\n      instanceType<span class=\"token operator\">:</span> <span class=\"token string\">\"t2.micro\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">TerraformOutput</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"public_ip\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      value<span class=\"token operator\">:</span> instance<span class=\"token punctuation\">.</span>publicIp<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> stack <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyStack</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">,</span> <span class=\"token string\">\"aws_instance\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">RemoteBackend</span><span class=\"token punctuation\">(</span>stack<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  hostname<span class=\"token operator\">:</span> <span class=\"token string\">\"app.terraform.io\"</span><span class=\"token punctuation\">,</span>\n  organization<span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;YOUR_ORG>\"</span><span class=\"token punctuation\">,</span>\n  workspaces<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"learn-cdktf\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">synth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Replace <code class=\"language-text\">&lt;YOUR_ORG></code> with the Terraform Cloud organization name you chose when you ran <code class=\"language-text\">terraform init</code> earier.</p>\n<p>run your code</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">cdktf deploy</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>The <code class=\"language-text\">cdktf deploy</code> command runs <code class=\"language-text\">terraform apply</code> in the background.</p>\n<p>Please let me know your comments :)</p>","timeToRead":9,"id":"c91ca8a9-7932-53e3-ada6-89f75e698474","frontmatter":{"date":"June 26, 2021","title":"CDKTF (Cloud development kist terraform)"}}},"pageContext":{"slug":"/blog/cdktf-cloud-development-kist-terraform"}},"staticQueryHashes":["1033876704","3435786681","550521386"]}